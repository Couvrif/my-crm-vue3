{"version":3,"file":"js/497.c6ed0106.js","mappings":"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","sources":["webpack://vue3-ts-cms/./src/views/main/system/role/config/search.config.ts","webpack://vue3-ts-cms/./src/views/main/system/role/config/table.config.ts","webpack://vue3-ts-cms/./src/views/main/system/role/config/modal.config.ts","webpack://vue3-ts-cms/./src/views/main/system/role/role.vue","webpack://vue3-ts-cms/./src/views/main/system/role/role.vue?3dad"],"sourcesContent":["import { IForm } from \"@/base-ui/form\";\n\nexport const searchFormConfig: IForm = {\n  labelWidth: \"100px\",\n  formItems: [\n    {\n      field: \"name\",\n      type: \"input\",\n      label: \"角色名称：\",\n      placeholder: \"请输入角色名\",\n    },\n    {\n      field: \"intro\",\n      type: \"input\",\n      label: \"权限介绍：\",\n      placeholder: \"请输入权限介绍\",\n    },\n    {\n      field: \"createAt\",\n      type: \"daterange\",\n      label: \"创建时间：\",\n      placeholder: \"请选择你创建的时间\",\n      otherOptions: {\n        \"start-placeholder\": \"开始时间\",\n        \"end-placeholder\": \"结束时间\",\n      },\n    },\n  ],\n};\n","export const contentTableConfig = {\n  title: \"角色\",\n  propList: [\n    {\n      prop: \"name\",\n      label: \"角色名\",\n      minWidth: \"100\",\n      slotName: \"name\",\n    },\n    {\n      prop: \"intro\",\n      label: \"权限介绍\",\n      minWidth: \"100\",\n      slotName: \"intro\",\n    },\n    {\n      prop: \"createAt\",\n      label: \"创建时间\",\n      minWidth: \"100\",\n      slotName: \"createAt\",\n    },\n    {\n      prop: \"updateAt\",\n      label: \"更新时间\",\n      minWidth: \"100\",\n      slotName: \"updateAt\",\n    },\n    {\n      label: \"操作\",\n      minWidth: \"80\",\n      slotName: \"handler\",\n    },\n  ],\n  showIndexColumn: true,\n  showSelectColumn: true,\n};\n","import { IForm } from \"@/base-ui/form\";\n\nexport const modalConfig: IForm = {\n  title: \"新建角色\",\n  formItems: [\n    {\n      field: \"name\",\n      type: \"input\",\n      label: \"角色名\",\n      placeholder: \"请输入角色名\",\n      // rules: [{ required: true }]\n    },\n    {\n      field: \"intro\",\n      type: \"input\",\n      label: \"角色介绍\",\n      placeholder: \"请输入角色介绍\",\n      // rules: [{ required: true }]\n    },\n  ],\n  colLayout: { span: 24 },\n  itemStyle: { padding: \"5px 40px\" },\n};\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3cca548b\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"role\"\n};\nconst _hoisted_2 = {\n  class: \"menusList\"\n};\nimport pageContent from \"@/components/page-content\";\nimport pageSearch from \"@/components/page-search\";\nimport pageModal from \"@/components/page-modal\";\nimport { searchFormConfig } from \"./config/search.config\";\nimport { contentTableConfig } from \"./config/table.config\";\nimport { modalConfig } from \"./config/modal.config\";\nimport { usePageSearch } from \"@/hooks/usePageSearch\";\nimport { usePageModal } from \"@/hooks/usePageModal\";\nimport { getMenuLeafKeys } from \"@/utils/initRouter\";\nimport { ElTree } from \"element-plus/lib/index\";\nimport { ref, nextTick } from \"vue\";\nimport Store from \"@/store\";\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'role',\n\n  setup(__props) {\n    const urlName = \"role/list\";\n    const {\n      login\n    } = Store();\n    const elTreeRef = ref();\n    const otherInfo = ref({});\n    const menuList = login.entireMenu;\n    console.log(\"lailaial\", menuList, login.entireDepartment);\n\n    const handleSelectMenu = (data1, data2) => {\n      console.log(\"data\", data1, data2);\n      const checkedKeys = data2.checkedKeys;\n      const halfCheckedKeys = data2.halfCheckedKeys;\n      const menuList = [...checkedKeys, ...halfCheckedKeys];\n      otherInfo.value = {\n        menuList\n      };\n    };\n\n    const updateCallback = item => {\n      const leafList = getMenuLeafKeys(item.menuList);\n      console.log(\"leafList\", leafList, elTreeRef);\n      nextTick(() => {\n        elTreeRef.value?.setCheckedKeys(leafList, false);\n      });\n    };\n\n    const {\n      pageContentRef,\n      queryBtnClick,\n      resetBtnClick\n    } = usePageSearch();\n    const {\n      pageModalRef,\n      handleNewData,\n      handleUpdateData,\n      defaultInfo\n    } = usePageModal(undefined, updateCallback);\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_unref(pageSearch), {\n        searchFormConfig: _unref(searchFormConfig),\n        onQueryBtnClick: _unref(queryBtnClick),\n        onResetBtnClick: _unref(resetBtnClick)\n      }, null, 8, [\"searchFormConfig\", \"onQueryBtnClick\", \"onResetBtnClick\"]), _createVNode(_unref(pageContent), {\n        ref_key: \"pageContentRef\",\n        ref: pageContentRef,\n        contentTableConfig: _unref(contentTableConfig),\n        urlName: urlName,\n        onHandleUpdateData: _unref(handleUpdateData),\n        onHandleNewData: _unref(handleNewData)\n      }, null, 8, [\"contentTableConfig\", \"onHandleUpdateData\", \"onHandleNewData\"]), _createVNode(_unref(pageModal), {\n        urlName: urlName,\n        defaultInfo: _unref(defaultInfo),\n        ref_key: \"pageModalRef\",\n        ref: pageModalRef,\n        modalConfig: _unref(modalConfig),\n        otherInfo: otherInfo.value\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_unref(ElTree), {\n          ref_key: \"elTreeRef\",\n          ref: elTreeRef,\n          data: _unref(menuList),\n          \"show-checkbox\": \"\",\n          \"node-key\": \"id\",\n          props: {\n            children: 'children',\n            label: 'name'\n          },\n          onCheck: handleSelectMenu\n        }, null, 8, [\"data\"])])]),\n        _: 1\n      }, 8, [\"defaultInfo\", \"modalConfig\", \"otherInfo\"])]);\n    };\n  }\n\n});","/* unplugin-vue-components disabled */import script from \"./role.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./role.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./role.vue?vue&type=style&index=0&id=3cca548b&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\web\\\\vue\\\\vue3\\\\myCms-vue3+ts\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3cca548b\"]])\n\nexport default __exports__"],"names":["searchFormConfig","labelWidth","formItems","field","type","label","placeholder","otherOptions","contentTableConfig","title","propList","prop","minWidth","slotName","showIndexColumn","showSelectColumn","modalConfig","colLayout","span","itemStyle","padding","_hoisted_1","class","_hoisted_2","__name","setup","__props","urlName","login","elTreeRef","ref","otherInfo","menuList","entireMenu","console","log","entireDepartment","handleSelectMenu","data1","data2","checkedKeys","halfCheckedKeys","value","updateCallback","item","leafList","setCheckedKeys","pageContentRef","queryBtnClick","resetBtnClick","usePageSearch","pageModalRef","handleNewData","handleUpdateData","defaultInfo","usePageModal","undefined","_ctx","_cache","onQueryBtnClick","onResetBtnClick","ref_key","onHandleUpdateData","onHandleNewData","default","_","data","props","children","onCheck","__exports__"],"sourceRoot":""}